<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Explore Page</title>
    <style>
      .image {
        width: 100vw;
        object-fit: cover;
        height: 530px;
        opacity: 0.3;
      }
    </style>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
    />
    <link rel="stylesheet" href="../src/input.css"/>
    <link rel="stylesheet" href="../src/style.css"/>
    <link rel="stylesheet" href="../src/output.css">
    
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.3/dist/tailwind.min.css" rel="stylesheet">


<link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.7.0/flowbite.min.css" rel="stylesheet">


<script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.7.0/flowbite.min.js"></script>

  </head>
  <script src="https://cdn.tailwindcss.com"></script>



<body class="bg-background-light dark:bg-[var(--color-background)]">

  <header id="header" class="fixed top-0 left-0 w-full z-50 px-6 py-4 flex items-center justify-between
     bg-transparent transition-all duration-300">

  <!-- Logo -->
  <div class="flex items-center gap-1">
    <a href="#" class="text-3xl font-bold tracking-tight drop-shadow-md">
      <span class="text-white font-type-logo">Cam</span>
      <span class="text-blue-500 font-type-logo">Flix</span>
    </a>
  </div>

  <!-- Search bar -->
  <div class="hidden md:flex flex-1 max-w-md mx-8">
    <div class="relative w-full">
      <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
        <svg class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
        </svg>
      </div>
     <input type="text"
       class="block w-full pl-10 pr-3 py-2 border border-gray-600/50 bg-gray-600/50 rounded-full leading-5 
              text-white focus:outline-none focus:ring-1 sm:text-sm 
              transition duration-150 ease-in-out"
       placeholder="Search..." />
    </div>
  </div>

  <!-- Nav links -->
  <nav class="hidden md:flex items-center gap-6 text-white">
    <a href="#" class="hover:text-gray-400 transition-colors">Home</a>
    <a href="#" class="hover:text-gray-400 transition-colors">About Us</a>
    <a href="#" class="inline-flex items-center gap-1 hover:text-gray-400 transition-colors">
      <span>Let's Explore</span>
      <svg class="w-4 h-4 transition-transform duration-300 group-hover:translate-x-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
      </svg>
    </a>

    <!-- Dark / Light Mode Button -->
    <button id="theme-toggle" class="p-2 rounded-full bg-white text-black hover:bg-gray-200 transition shadow-lg">
      <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                    </svg>
    </button>
  </nav>

  <!-- Mobile menu button -->
  <button id="mobile-menu-btn" class="md:hidden text-white p-2 focus:outline-none drop-shadow-md">
    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
    </svg>
  </button>

</header>

<!-- CAROUSEL -->
<div id="default-carousel" class="relative w-full h-screen" data-carousel="slide">
  <!-- Carousel wrapper -->
  <div class="relative h-full overflow-hidden">
    <!-- Slide 1 -->
    <div class="hidden duration-700 ease-in-out" data-carousel-item="active">
      <img src="https://cdnb.artstation.com/p/assets/images/images/053/000/821/large/sonu-avtar-title.jpg?1661189157"
           class="absolute w-full h-full object-cover inset-0" alt="Movie 1">
      <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-80"></div>
    </div>
    <!-- Slide 2 -->
    <div class="hidden duration-700 ease-in-out" data-carousel-item>
      <img src="https://mir-s3-cdn-cf.behance.net/projects/404/28917d237964319.Y3JvcCwyNzAwLDIxMTEsMCw3OTU.jpg"
           class="absolute w-full h-full object-cover inset-0" alt="Movie 2">
      <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-80"></div>
    </div>
    <!-- Slide 3 -->
    <div class="hidden duration-700 ease-in-out" data-carousel-item>
      <img src="https://i.ytimg.com/vi/pNIRHvS2bLM/hq720.jpg"
           class="absolute w-full h-full object-cover inset-0" alt="Movie 3">
      <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-80"></div>
    </div>
  </div>

  <!-- Slider indicators -->
  <div class="absolute z-30 flex -translate-x-1/2 bottom-5 left-1/2 space-x-3">
    <button type="button" class="w-3 h-3 rounded-full bg-white/50 hover:bg-white" data-carousel-slide-to="0"></button>
    <button type="button" class="w-3 h-3 rounded-full bg-white/50 hover:bg-white" data-carousel-slide-to="1"></button>
    <button type="button" class="w-3 h-3 rounded-full bg-white/50 hover:bg-white" data-carousel-slide-to="2"></button>
  </div>

  <!-- Slider controls -->
  <button type="button" class="absolute top-0 left-0 z-30 flex items-center justify-center h-full px-4" data-carousel-prev>
    <span class="inline-flex items-center justify-center w-12 h-12 rounded-full bg-black/30 hover:bg-black/50 backdrop-blur-sm">
      <svg class="w-5 h-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
      </svg>
    </span>
  </button>
  <button type="button" class="absolute top-0 right-0 z-30 flex items-center justify-center h-full px-4" data-carousel-next>
    <span class="inline-flex items-center justify-center w-12 h-12 rounded-full bg-black/30 hover:bg-black/50 backdrop-blur-sm">
      <svg class="w-5 h-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
      </svg>
    </span>
  </button>
</div>



<!-- SCRIPT -->
<script>
  // Dark/Light mode toggle
  const toggleButton = document.getElementById('theme-toggle');
  const html = document.documentElement;
  toggleButton.addEventListener('click', () => html.classList.toggle('dark'));

  // Scroll header effect (only blur, no color change)
  const header = document.getElementById('header');

  window.addEventListener('scroll', () => {
    if (window.scrollY > 50) { // adjust scroll threshold
      header.classList.add('backdrop-blur-md', 'bg-black/40'); // keeps transparency but adds blur
    } else {
      header.classList.remove('backdrop-blur-md', 'bg-black/40');
    }
  });
</script>


<!-- Explore Content Section -->
            
    <h1 class="text-2xl font-bold ml-7 mt-7 dark:text-white font-type">
      Explore movies here
    </h1>

    <div class=" p-10 dark:bg-[var(--color-background)] bg-background-light mt-3">
        <!-- dark:bg-background grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mt-5 -->
      <!-- Movie Card -->

     

       <!-- <div class="card dark:text-[var(--color-text-color)] text-[var(--color-text-color-light)]">
        <div>
          <a href="#">
            <img
              class="w-[291px] h-[376px] object-cover mx-auto rounded-3xl transform transition-transform duration-300 hover:scale-90 ease-in-out"
              src="../asset/photo_2025-11-21_17-13-50.jpg"
              alt=""
          /></a>
        </div>

        <div class="mt-2 mb-2 flex justify-around items-start">
          <div>
            <span class="block font-semibold text-[28px] font-type">John Carter</span>
            <p class=" text-[18px] font-type dark:text-[var(--color-description-color)] text-[var(--color-description-color-light)]">
              Action / Romance
            </p>
          </div>

          <span
            class="text-[20px] mt-1 flex items-center gap-1.5 text-[var(--color-secondary)]"
          >
            <i class="fa-solid fa-star"></i>
            <span class="dark:text-[var(--color-text-color)] text-[var(--color-text-color-light)] font-type">4.2</span>
          </span>
        </div>
      </div>
      -->
    </div>
    <template id="movie-card-template-explored">
        <div class="group cursor-pointer movie-card" data-movie-id="">
            <div class="relative aspect-2/3 rounded-xl overflow-hidden mb-3 w-full">
                <img src="" class="w-full min-h-80 object-cover group-hover:scale-110 transition duration-300" alt="Movie Poster">
                <div class="absolute inset-0 bg-black/20 group-hover:bg-transparent transition"></div>
            </div>
            <div class="flex place-content-between">
                <h3 class="font-semibold truncate movie-title"></h3>
                <span class="text-yellow-400 flex items-center gap-1"><i class="fa-solid fa-star"></i> <span class="movie-rating"></span></span>
            </div>
            <div class="flex items-center text-xs text-gray-400 gap-2 mt-1">
                <span class="movie-genre"></span>
            </div>
        </div>
    </template>
    

    <script>
        
      (function () {
        const API_KEY = '4113f3ad734e747a5b463cde8c55de42';
        const IMAGE_BASE = 'https://image.tmdb.org/t/p/w500';
        let allExploredMovies = [];
        let exploredExpanded = false;

        document.addEventListener('DOMContentLoaded', () => {
          const gridParent = document.querySelector('h1 + div');
          if (!gridParent) return;

          // Use the static <template id="movie-card-template-explored"> present in the HTML

          // Create explored grid
          const exploredGrid = document.createElement('div');
          exploredGrid.id = 'explored-grid';
          exploredGrid.className = 'grid grid-cols-2 md:grid-cols-4 gap-8 mt-5 px-4';
          exploredGrid.innerHTML = '<div class="col-span-full text-center text-gray-400 py-10">Loading movies...</div>';

          // Clear existing static cards and insert our grid
          gridParent.innerHTML = '';
          gridParent.appendChild(exploredGrid);

          // Hook existing Load More / See All button if present
          const loadMoreBtn = document.querySelector('div.flex.justify-center.mt-4 button');
          if (loadMoreBtn) {
            loadMoreBtn.id = 'explore-see-all-btn';
            loadMoreBtn.textContent = 'see all';
            loadMoreBtn.addEventListener('click', () => {
              exploredExpanded = !exploredExpanded;
              renderExploredMovies(exploredExpanded ? allExploredMovies : allExploredMovies.slice(0, 16));
              loadMoreBtn.textContent = exploredExpanded ? 'see less' : 'see all';
            });
          }

          loadExploredMovies();
        });

        async function loadExploredMovies() {
          const url = `https://api.themoviedb.org/3/movie/popular?api_key=${API_KEY}&language=en-US&page=4`;
          try {
            const res = await fetch(url);
            const json = await res.json();
            allExploredMovies = json.results || [];
            renderExploredMovies(allExploredMovies.slice(0, 16));
          } catch (err) {
            console.error('Failed to load explored movies', err);
            const g = document.getElementById('explored-grid');
            if (g) g.innerHTML = '<div class="col-span-full text-center text-red-500 py-10">Failed to load movies</div>';
          }
        }

        // function renderExploredMovies(movies) {
        //   const grid = document.getElementById('explored-grid');
        //   if (!grid) return;
        //   grid.innerHTML = '';
        //   const tpl = document.getElementById('movie-card-template-explored');
        //   movies.forEach((movie) => {
        //     const frag = tpl.content.cloneNode(true);
        //     const cardEl = frag.querySelector('.movie-card') || frag.firstElementChild;
        //     const img = frag.querySelector('img');
        //     if (img) img.src = movie.poster_path ? IMAGE_BASE + movie.poster_path : '../asset/photo_2025-11-21_17-13-50.jpg';
        //     if (img) img.alt = movie.title || movie.name || 'Movie Poster';
        //     if (cardEl && cardEl.dataset) cardEl.dataset.movieId = movie.id;
        //     const titleEl = frag.querySelector('.movie-title');
        //     if (titleEl) titleEl.textContent = movie.title || movie.name || 'Untitled';
        //     const ratingEl = frag.querySelector('.movie-rating');
        //     if (ratingEl) ratingEl.textContent = movie.vote_average ? movie.vote_average.toFixed(1) : '0.0';
        //     const clickTarget = frag.querySelector('.movie-card') || frag;
        //     clickTarget.addEventListener('click', (e) => {
        //       e.preventDefault();
        //       window.location.href = '../pages/detail.html?movieId=' + movie.id;
        //     });
        //     grid.appendChild(frag);
        //   });
        // }

                function renderExploredMovies(movies) {
            const grid = document.getElementById('explored-grid');
            grid.innerHTML = '';

            movies.forEach(movie => {
                const card = document.getElementById('movie-card-template-explored').content.cloneNode(true);
                const cardElement = card.querySelector('.movie-card');
                const img = card.querySelector('img');
                const title = card.querySelector('.movie-title');
                const genre = card.querySelector('.movie-genre');
                const rating = card.querySelector('.movie-rating');

                cardElement.dataset.movieId = movie.id;
                img.src = movie.poster_path ? `${IMAGE_BASE}${movie.poster_path}` : 'https://placehold.co/500x750?text=No+Image';
                img.alt = movie.title;
                title.textContent = movie.title;
                genre.textContent = movie.release_date ? `${movie.release_date}` : 'No date available';
                rating.textContent = movie.vote_average?.toFixed(1) ?? 'N/A';

                // Add click listener
                cardElement.addEventListener('click', () => {
                    window.location.href = `./detail.html?movieId=${movie.id}`;
                });

                grid.appendChild(card);
            });
        }

      })();


    </script>

    <div class="flex justify-center mt-4">
      <button
        class="flex items-center justify-center rounded-2xl dark:bg-[var(--color-primary)] dark:hover:bg-[var(--color-accents)] text-white bg-[var(--color-primary-light)] hover:bg-[var(--color-accents)] font-bold w-[100px] h-[50px] text-center font-type"
      >
        Load More
      </button>
    </div>

    <footer
      class="dark:bg-[var(--color-background)] bg-background-light grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mt-20 mb-10 place-items-center"
    >
      <div class="space-y-7">
        <div>
          <h3 class="dark:text-white text-[40px] font-type-logo">
            <span class="text-white">Cam</span
            ><span class="text-blue-600">Flix</span>
          </h3>
        </div>

        <div>
          <a
            href="mailto:sovanrothapit@gmail.com"
            class="dark:text-white text-[25px] font-type" 
            >support@camflix.com</a
          >
        </div>
        <div class="space-x-7">
          <span
            ><a href="#" class="dark:text-white dark:bg-gray-900 text-[40px]"
              ><i class="fa-brands fa-facebook"></i></a
          ></span>
          <span
            ><a href="#" class="dark:text-white dark:bg-gray-900 text-[40px]"
              ><i class="fa-brands fa-twitter"></i></a
          ></span>
          <span
            ><a href="#" class="dark:text-white dark:bg-gray-900 text-[40px]"
              ><i class="fa-brands fa-instagram"></i></a
          ></span>
        </div>
      </div>

      <div class="space-y-7">
        <div>
          <a href="#">
            <img
              src="../asset/New Logo iSTAD-06.png"
              class="w-[230px] h-[87px]"
              alt="Istad Logo"
            />
          </a>
        </div>
        <div>
          <a
            href="mailto:sovanrothapit@gmail.com"
            class="dark:text-white text-[25px] font-type"
            >info.istad@gmail.com</a
          >
        </div>

        <div class="space-x-7">
          <span
            ><a href="#" class="dark:text-white dark:bg-gray-900 text-[40px]"
              ><i class="fa-brands fa-facebook"></i></a
          ></span>
          <span
            ><a href="#" class="dark:text-white dark:bg-gray-900 text-[40px]"
              ><i class="fa-brands fa-twitter"></i></a
          ></span>
          <span
            ><a href="#" class="dark:text-white dark:bg-gray-900 text-[40px]"
              ><i class="fa-brands fa-instagram"></i></a
          ></span>
        </div>
      </div>

      <div>
        <h3 class="dark:text-white text-[25px] font-type">Quick Link</h3>
        <div class="space-y-7 mt-6">
          <div><a class="dark:text-white text-[20px] font-type" href="#">Home</a></div>
          <div>
            <a class="dark:text-white text-[20px] font-type" href="#">About Us</a>
          </div>
          <div>
            <a class="dark:text-white text-[20px] font-type" href="#">Explore Moives</a>
          </div>
        </div>
      </div>

      <div>
        <h3 class="dark:text-white text-[25px] font-type">Support</h3>
        <div class="space-y-7 mt-6">
          <div><a class="dark:text-white text-[20px] font-type" href="#">FAQs</a></div>
          <div>
            <a class="dark:text-white text-[20px] font-type" href="#">Support Centre</a>
          </div>
          <div>
            <a class="dark:text-white text-[20px] font-type" href="#">Contact Us</a>
          </div>
        </div>
      </div>
    </footer>

    <hr />

    <p class="dark:text-white text-[18px] flex justify-center mt-5 mb-5 font-type">
      @copy right 2025 CamFlix. All right reserved.
    </p>
  </body>
</html>
