<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Explore Page</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="../src/input.css">
<link rel="stylesheet" href="..//src/output.css">
<link rel="stylesheet" href="../src/input.css"/>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" />

  <!-- Flowbite -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.7.0/flowbite.min.js"></script>

  <style>
    .image {
      width: 100vw;
      object-fit: cover;
      height: 530px;
      opacity: 0.3;
    }
    #mobile-menu {
            transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
        }

        .menu-closed {
            transform: translateY(-100%);
            /* Moves it UP above the screen */
            opacity: 0;
            pointer-events: none;
        }

        .menu-open {
            transform: translateY(0);
            /* Slides DOWN to natural position */
            opacity: 1;
            pointer-events: auto;
        }
   

  </style>
</head>

<body class="bg-gray-100 dark:bg-gray-900">

  <!-- HEADER -->
<nav id="mainNav"
     class="fixed top-0 left-0 w-full z-50 px-4 md:px-8 py-2 flex justify-center items-center
            bg-gradient-to-b from-black/90 to-transparent transition-all duration-300">

    <!-- Logo (left side) -->
    <div class="absolute left-2 md:left-8 flex items-center gap-2 z-50">
        <a href="../index.html" rel="noopener noreferrer">
            <img src="../images/CamFlix-Logo.png" alt="camflix Logo" class="h-12 w-auto object-contain">
        </a>
    </div>

    <!-- Search Bar (centered) -->
  <div class="flex items-center w-6/12 max-w-md md:max-w-lg lg:max-w-xl
            bg-white/10 backdrop-blur-md rounded-full px-4 py-2 border border-white/10">
    <a href="searchpage.html" class="mr-3">
        <i class="fa-solid fa-search text-gray-400 hover:text-white transition-colors"></i>
        <input type="text" placeholder="Search movies..."
           class="bg-transparent border-none outline-none text-sm w-full text-white placeholder-gray-400 focus:ring-0">
    </a>
  </div>

    <!-- Desktop Links (right side) -->
    <div class="hidden md:flex absolute right-4 md:right-8 items-center gap-6 text-sm font-medium">
        <a href="about.html" class="text-gray-300 hover:text-primary transition">About us</a>
        <a href="explored.html" class="text-gray-300 hover:text-primary transition flex items-center gap-1 whitespace-nowrap">
            Let's Explore
            <svg class="w-3 h-3 transition-transform duration-300 group-hover:translate-x-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
        </a>
        <button id="theme-toggle" class="p-1 rounded-full bg-white text-black hover:bg-gray-200 transition shadow-lg">
            <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
            </svg>
        </button>
    </div>

    <!-- Mobile Menu Button -->
    <div class="md:hidden absolute right-4">
        <button id="menu-btn" class="p-2 rounded-md text-white hover:bg-white/10 transition z-50">
            <i class="fa-solid fa-bars text-2xl"></i>
        </button>
    </div>
</nav>



<!-- Mobile Menu -->
<div id="mobile-menu"
     class="fixed inset-0 bg-dark/95 backdrop-blur-xl z-40 flex flex-col items-center justify-center space-y-8 menu-closed md:hidden">
    <a href="#" class="text-2xl font-bold text-gray-300 hover:text-primary transition" onclick="toggleMenu()">About us</a>
    <a href="#" class="text-2xl font-bold text-gray-300 hover:text-primary transition" onclick="toggleMenu()">Explore</a>
</div>



    <!-- Dropdown -->
  <!-- <div id="dropdown"
     class="hidden bg-black/90 backdrop-blur-xl border border-white/10
            rounded-2xl p-6 shadow-2xl h-full overflow-y-auto z-50 
           w-full">

    <div id="dropdown-grid"
         class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6">
    </div>

  </div> -->

<script>
function goToSearchPage() {
    window.location.href = 'searchpage.html';
}
</script>




<script>
    const mobileSearchBtn = document.getElementById('mobile-search-btn');
    const mobileSearch = document.getElementById('mobile-search');

    mobileSearchBtn.addEventListener('click', () => {
        mobileSearch.classList.toggle('hidden'); // show/hide search bar
    });
</script>
    <!-- Scripts -->
    <script>
        const menuBtn = document.getElementById('menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        let isMenuOpen = false;

        function toggleMenu() {
            isMenuOpen = !isMenuOpen;
            if (isMenuOpen) {
                mobileMenu.classList.remove('menu-closed');
                mobileMenu.classList.add('menu-open');
                // Change icon to X
                menuBtn.innerHTML = '<i class="fa-solid fa-xmark text-2xl"></i>';
                document.body.style.overflow = 'hidden'; // Prevent scrolling
            } else {
                mobileMenu.classList.remove('menu-open');
                mobileMenu.classList.add('menu-closed');
                // Change icon back to bars
                menuBtn.innerHTML = '<i class="fa-solid fa-bars text-2xl"></i>';
                document.body.style.overflow = ''; // Enable scrolling
            }
        }
        menuBtn.addEventListener('click', toggleMenu);

        // Background navigation on scroll
        // Scroll Event Listener
        window.addEventListener('scroll', () => {
            const mainNav = document.getElementById('mainNav');

            if (window.scrollY > 50) {
                mainNav.classList.remove('bg-gradient-to-b', 'from-black/90', 'to-transparent');
                mainNav.classList.add('bg-black/40', 'backdrop-blur-md', 'border-b', 'border-white/10', 'shadow-lg');
            } else {
                // AT THE TOP: Reset to original
                mainNav.classList.remove('bg-black/40', 'backdrop-blur-md', 'border-b', 'border-white/10', 'shadow-lg');
                mainNav.classList.add('bg-gradient-to-b', 'from-black/90', 'to-transparent');
            }
        });
    </script>

 
 <!-- Scripts -->

    



<!-- CAROUSEL -->
<div id="default-carousel" class="relative w-full h-screen" data-carousel="slide">
  <!-- Carousel wrapper -->
  <div class="relative h-full overflow-hidden">
    <!-- Slide 1 -->
    <div class="hidden duration-700 ease-in-out" data-carousel-item="active">
      <img src="https://cdnb.artstation.com/p/assets/images/images/053/000/821/large/sonu-avtar-title.jpg?1661189157"
           class="absolute w-full h-full object-cover inset-0" alt="Movie 1">
      <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-80"></div>
    </div>
    <!-- Slide 2 -->
    <div class="hidden duration-700 ease-in-out" data-carousel-item>
      <img src="https://mir-s3-cdn-cf.behance.net/projects/404/28917d237964319.Y3JvcCwyNzAwLDIxMTEsMCw3OTU.jpg"
           class="absolute w-full h-full object-cover inset-0" alt="Movie 2">
      <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-80"></div>
    </div>
    <!-- Slide 3 -->
    <div class="hidden duration-700 ease-in-out" data-carousel-item>
      <img src="https://i.ytimg.com/vi/pNIRHvS2bLM/hq720.jpg"
           class="absolute w-full h-full object-cover inset-0" alt="Movie 3">
      <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-80"></div>
    </div>
  </div>

  <!-- Slider indicators -->
  <div class="absolute z-30 flex -translate-x-1/2 bottom-5 left-1/2 space-x-3">
    <button type="button" class="w-3 h-3 rounded-full bg-white/50 hover:bg-white" data-carousel-slide-to="0"></button>
    <button type="button" class="w-3 h-3 rounded-full bg-white/50 hover:bg-white" data-carousel-slide-to="1"></button>
    <button type="button" class="w-3 h-3 rounded-full bg-white/50 hover:bg-white" data-carousel-slide-to="2"></button>
  </div>

  <!-- Slider controls -->
  <button type="button" class="absolute top-0 left-0 z-30 flex items-center justify-center h-full px-4" data-carousel-prev>
    <span class="inline-flex items-center justify-center w-12 h-12 rounded-full bg-black/30 hover:bg-black/50 backdrop-blur-sm">
      <svg class="w-5 h-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
      </svg>
    </span>
  </button>
  <button type="button" class="absolute top-0 right-0 z-30 flex items-center justify-center h-full px-4" data-carousel-next>
    <span class="inline-flex items-center justify-center w-12 h-12 rounded-full bg-black/30 hover:bg-black/50 backdrop-blur-sm">
      <svg class="w-5 h-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
      </svg>
    </span>
  </button>
</div>
  <!-- Page Title -->
  <h1 class="text-2xl font-bold ml-7 mt-7 dark:text-white">Explore movies here</h1>

  <!-- Movies Grid -->
  <div id="movies-grid" class="dark:bg-background grid sm:grid-cols-1 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 xl:mx-8 lg:mx-4 mx-2 gap-6 mt-5n font-type">
    <!-- Movies will load here dynamically -->
  </div>

  <!-- Load More Button -->
  <div class="flex justify-center mt-6">
    <button id="load-more" class="flex items-center justify-center rounded-2xl dark:bg-blue-700 dark:hover:bg-blue-500 text-white bg-blue-400 hover:bg-blue-600 font-bold w-[120px] h-[50px] text-center">
      Load More
    </button>
  </div>

  <script>
    // Dark/Light toggle
    const toggleButton = document.getElementById('theme-toggle');
    toggleButton.addEventListener('click', () => document.documentElement.classList.toggle('dark'));

    // Header scroll effect
    const header = document.getElementById('header');
    window.addEventListener('scroll', () => {
      if(window.scrollY > 50){
        header.classList.add('backdrop-blur-md', 'bg-black/40');
      } else {
        header.classList.remove('backdrop-blur-md', 'bg-black/40');
      }
    });
    const apiKey = "4113f3ad734e747a5b463cde8c55de42"; // your API key
    const imageBaseURL = "https://image.tmdb.org/t/p/w500";
    let currentPage = 1;

    const moviesGrid = document.getElementById("movies-grid");
    const loadMoreBtn = document.getElementById("load-more");
    const searchInput = document.getElementById("search-input");
    const searchBtn = document.getElementById("search-btn");
    
    
  
  
    function fetchPopularMovies(page = 1) {
      fetch(`https://api.themoviedb.org/3/movie/popular?api_key=${apiKey}&language=en-US&page=${page}`)
        .then(res => res.json())
        .then(data => {
          data.results.forEach(movie => {
            const card = document.createElement("div");
            

            card.classList.add("card", "dark:text-white", "text-black");

           

            card.innerHTML = `
          
              <div>
                <a href="#">
                  <img class="w-[291px] h-[376px] object-cover mx-auto rounded-3xl transform transition-transform duration-300 hover:scale-95 "
                       src="${imageBaseURL + movie.poster_path}" alt="${movie.title}">
                </a>
              </div>
              <div class="mt-2 mb-2 flex justify-around items-start">
                <div>
                  <span class="font-semibold text-[20px] line-clamp-1">${movie.title}</span>
                  <p class="text-[16px]">Release: ${movie.release_date}</p>
                </div>
                <span class="text-[18px] mt-1 flex items-center gap-1.5 text-yellow-400">
                  <i class="fa-solid fa-star"></i>
                  <span>${movie.vote_average}</span>
                </span>
              </div>
            `;
            moviesGrid.appendChild(card);
          });
        })
        .catch(err => console.error("Error fetching movies:", err));
    }
 
    fetchPopularMovies(currentPage);

    
    loadMoreBtn.addEventListener("click", () => {
      currentPage++;
      fetchPopularMovies(currentPage);
    });


searchInput.addEventListener("click", () => {
    dropdown.classList.toggle("hidden");
    fetchDropdownMovies();
    
});





// function fetchDropdownMovies() {
//     fetch(`https://api.themoviedb.org/3/movie/popular?api_key=${apiKey}&language=en-US&page=1`)
//         .then(res => res.json())
//         .then(data => {
          
//             dropdown.innerHTML = `
//             <h1 class="text-2xl font-bold ml-7 mt-10 dark:text-white">Popular Movies</h1>
//                 <div id="grid-box" class="grid grid-cols-1 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6 p-6">
//                 </div>
//             `;
            
//             const grid = document.getElementById("grid-box");

//             data.results.forEach(movie => {
//                 const card = document.createElement("div");
//                 card.classList.add("card", "dark:text-white", "text-black");
                
//                 card.innerHTML = `
                  
//                     <div>
//                         <img class="w-[291x] h-[376px] object-cover mx-auto rounded-2xl transform transition duration-300 hover:scale-95"
//                              src="${imageBaseURL + movie.poster_path}" alt="${movie.title}">
//                     </div>
//                     <div class="mt-2 mb-2 flex flex-col items-center">
//                         <span class="font-semibold text-[16px] line-clamp-1 text-center">${movie.title}</span>
//                         <p class="text-[14px]">Release: ${movie.release_date}</p>
//                     </div>
//                 `;
//                 grid.appendChild(card);
//             });
//         })
//         .catch(err => console.error("Error fetching dropdown movies:", err));
// }

// function positionDropdown() {
//     const rect = searchBar.getBoundingClientRect();

//     dropdown.style.top = rect.bottom + window.scrollY + "px";
//     dropdown.style.left = rect.left + window.scrollX + "px";
//     dropdown.style.width = rect.width + "px";
// }

// window.addEventListener("resize", positionDropdown);
// window.addEventListener("scroll", positionDropdown);


   
  </script>

</body>

</html>
